<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Gmail - 2083km Edition</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #d93025;
            --active-bg: #fce8e6;
            --text-primary: #1f1f1f;
            --text-secondary: #444746;
            --border-color: #e0e0e0;
            --search-bg: #e3e7ed;
            --card-bg: #f2f6fc;
            --google-blue: #0b57d0;
            --ai-bg: #d3e3fd;
            --font-ui: 'Roboto', -apple-system, BlinkMacSystemFont, sans-serif;
            --font-brand: 'Google Sans', 'Roboto', sans-serif;
        }
        @font-face {
            font-family: 'Google Sans';
            font-style: normal;
            font-weight: 400;
            src: local('Open Sans'), local('Roboto');
        }
        @font-face {
            font-family: 'Google Sans';
            font-style: normal;
            font-weight: 500;
            src: local('Open Sans Medium'), local('Roboto Medium');
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; }
        html, body { width: 100%; height: 100%; overflow: hidden; background: #fff; font-family: var(--font-ui); -webkit-font-smoothing: antialiased; }
        .login-view {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #f0f4f9;
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Roboto', sans-serif;
        }
        .login-card {
            background: white;
            padding: 48px 40px 36px;
            border-radius: 28px;
            width: 100%;
            max-width: 450px;
            display: flex;
            flex-direction: column;
        }
        @media (max-width: 600px) {
            .login-view { background: white; align-items: flex-start; }
            .login-card { padding: 24px; max-width: 100%; border-radius: 0; height: 100%; justify-content: flex-start; padding-top: 60px; }
        }
        .google-logo-login { height: 24px; margin-bottom: 16px; align-self: flex-start; }
        @media (min-width: 601px) { .google-logo-login { align-self: center; } }
        .login-heading { font-size: 24px; font-weight: 400; color: #1f1f1f; margin-bottom: 8px; font-family: var(--font-brand); line-height: 1.33; }
        .login-sub { font-size: 16px; color: #1f1f1f; margin-bottom: 40px; }
        .login-input-container { position: relative; margin-bottom: 8px; }
        .login-input {
            width: 100%;
            height: 56px;
            border: 1px solid #747775;
            border-radius: 4px;
            padding: 13px 16px;
            font-size: 16px;
            color: #1f1f1f;
            background: transparent;
            outline: none;
            transition: 0.2s;
        }
        .login-input:focus { border-color: #0b57d0; border-width: 2px; padding: 12px 15px; }
        .login-input-label {
            position: absolute;
            left: 12px;
            top: -10px;
            background: white;
            padding: 0 4px;
            font-size: 12px;
            color: #1f1f1f;
            display: none;
        }
        .login-input:focus + .login-input-label { display: block; color: #0b57d0; }
        .login-input:not(:placeholder-shown) + .login-input-label { display: block; }
        .forgot-link {
            color: #0b57d0;
            font-weight: 500;
            font-size: 14px;
            border-radius: 4px;
            padding: 4px 0;
            display: inline-block;
            cursor: pointer;
            margin-bottom: 20px;
        }
        .terms-text { 
            font-size: 12px; 
            color: #444746; 
            margin-top: 20px; 
            line-height: 1.5;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .guest-text { font-size: 14px; color: #444746; margin-top: 20px; line-height: 1.5; }
        .login-actions {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
            padding-top: 30px;
        }
        .create-btn { color: #0b57d0; font-weight: 500; font-size: 14px; background: none; border: none; cursor: pointer; }
        .next-btn {
            background-color: #0b57d0;
            color: white;
            border: none;
            border-radius: 20px;
            padding: 10px 24px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
        }
        .next-btn:active { background-color: #0947a8; }
        .app-shell { width: 100%; height: 100%; display: flex; flex-direction: column; display: none; }
        .header { padding: 12px 16px; background: #f6f8fc; z-index: 100; display: flex; align-items: center; justify-content: space-between; }
        .search-container { height: 48px; background: #eaf1fb; border-radius: 24px; display: flex; align-items: center; padding: 0 16px; flex: 1; margin-right: 12px; }
        .menu-icon { width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; cursor: pointer; margin-right: 16px; color: #444746; }
        .search-input { flex: 1; font-size: 16px; color: #1f1f1f; background: transparent; border: none; outline: none; font-family: var(--font-ui); font-weight: 400; }
        .search-input::placeholder { color: #444746; }
        .pfp-btn { width: 32px; height: 32px; border-radius: 50%; overflow: hidden; cursor: pointer; margin-left: 0; flex-shrink: 0; border: 2px solid #fff; box-shadow: 0 1px 2px rgba(0,0,0,0.1); }
        .pfp-btn img { width: 100%; height: 100%; object-fit: cover; }
        .profile-dropdown { position: fixed; top: 70px; right: 16px; width: 300px; background: #eaf1fb; border-radius: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); padding: 24px 20px; z-index: 150; display: none; text-align: center; }
        .profile-dropdown.active { display: block; }
        .profile-email-text { font-size: 14px; color: #444746; margin-bottom: 20px; font-family: var(--font-brand); }
        .profile-ring-box { width: 80px; height: 80px; margin: 0 auto 16px; position: relative; display: flex; align-items: center; justify-content: center; }
        .profile-ring { position: absolute; inset: 0; border-radius: 50%; padding: 3px; background: conic-gradient(#4285f4 0 25%, #ea4335 25% 50%, #fbbc05 50% 75%, #34a853 75% 100%); -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0); -webkit-mask-composite: xor; mask-composite: exclude; }
        .profile-avatar-large { width: 72px; height: 72px; border-radius: 50%; overflow: hidden; }
        .profile-avatar-large img { width: 100%; height: 100%; object-fit: cover; }
        .profile-hi { font-size: 22px; font-weight: 400; color: #1f1f1f; margin-top: 8px; font-family: var(--font-brand); }
        .sidebar-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.4); z-index: 200; opacity: 0; visibility: hidden; transition: 0.25s; }
        .sidebar-overlay.active { opacity: 1; visibility: visible; }
        .sidebar { position: fixed; top: 0; bottom: 0; left: 0; width: 300px; background: #f6f8fc; z-index: 250; transform: translateX(-100%); transition: transform 0.28s cubic-bezier(0.4, 0, 0.2, 1); display: flex; flex-direction: column; }
        .sidebar.open { transform: translateX(0); }
        .sidebar-header { padding: 20px 24px; display: flex; align-items: center; gap: 14px; }
        .sidebar-logo { height: 35px; width: auto; }
        .sidebar-logo-text { font-size: 22px; color: #444746; font-weight: 400; font-family: var(--font-brand); letter-spacing: -0.5px; }
        .nav-list { overflow-y: auto; padding: 12px; }
        .nav-item { height: 56px; display: flex; align-items: center; padding: 0 16px 0 26px; gap: 18px; cursor: pointer; color: #444746; border-radius: 28px; margin-bottom: 2px; }
        .nav-item:hover { background: #e0e6f0; }
        .nav-item.active { background: #d3e3fd; color: #001d35; }
        .icon-svg { width: 24px; height: 24px; fill: #444746; }
        .nav-item.active .icon-svg { fill: #001d35; }
        .nav-text { flex: 1; font-size: 14px; font-weight: 500; font-family: var(--font-brand); }
        .nav-badge { font-size: 12px; font-weight: 500; font-family: var(--font-ui); }
        .divider { height: 1px; background: #e0e0e0; margin: 8px 0; }
        .category-label { padding: 16px 16px 8px; font-size: 12px; font-weight: 500; color: #444746; font-family: var(--font-brand); letter-spacing: 0.1px; }
        .email-list-container { flex: 1; overflow-y: auto; background: #fff; }
        .ai-overview-card {
            margin: 16px;
            padding: 16px 20px;
            background-color: var(--ai-bg);
            border-radius: 12px;
            font-family: var(--font-brand);
            position: relative;
            cursor: pointer;
        }
        .ai-header-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0;
        }
        .ai-title-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .ai-label {
            font-size: 16px;
            color: #1f1f1f;
            font-weight: 500;
        }
        .gemini-star {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }
        .ai-chevron {
            width: 24px;
            height: 24px;
            fill: #444746;
            transition: transform 0.3s ease;
            flex-shrink: 0;
        }
        .ai-content {
            font-size: 15px;
            color: #1f1f1f;
            line-height: 1.6;
            font-family: var(--font-ui);
            margin-top: 12px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        .ai-overview-card.expanded .ai-content {
            max-height: 500px;
        }
        .ai-overview-card.expanded .ai-chevron {
            transform: rotate(180deg);
        }
        .email-item { display: flex; align-items: flex-start; padding: 12px 16px; cursor: pointer; background: #fff; gap: 16px; border-bottom: 1px solid #f2f2f2; }
        .email-item:active { background: #f2f6fc; }
        .avatar-container { width: 40px; height: 40px; flex-shrink: 0; position: relative; }
        .avatar-circle { width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 500; font-size: 20px; color: white; text-transform: uppercase; font-family: var(--font-brand); position: absolute; inset:0; }
        .avatar-img { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; position: absolute; inset:0; background: #eee; }
        .email-content-main { flex: 1; min-width: 0; padding-top: 0; }
        .email-first-line { display: flex; align-items: baseline; margin-bottom: 2px; justify-content: space-between; }
        .sender-name { font-size: 16px; color: #1f1f1f; font-weight: 700; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; flex: 1; margin-right: 8px; font-family: var(--font-ui); }
        .email-time { font-size: 12px; color: #1f1f1f; font-weight: 500; flex-shrink: 0; font-family: var(--font-ui); }
        .subject-line { font-size: 14px; color: #1f1f1f; margin-bottom: 2px; font-weight: 700; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; font-family: var(--font-ui); }
        .snippet { font-size: 14px; color: #5e5e5e; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; font-weight: 400; font-family: var(--font-ui); }
        .star-icon { width: 24px; height: 24px; flex-shrink: 0; margin-top: 2px; display: flex; align-items: center; justify-content: center; }
        .star-svg { width: 20px; height: 20px; fill: none; stroke: #5e5e5e; stroke-width: 2; transition: 0.2s; }
        .star-svg.starred { fill: #f9ab00; stroke: #f9ab00; stroke-width: 0; }
        .email-detail { display: none; flex-direction: column; height: 100%; overflow-y: auto; background: white; position: absolute; top: 0; left: 0; width: 100%; z-index: 150; }
        .email-detail.active { display: flex; }
        .detail-header-bar { padding: 12px 8px; display: flex; align-items: center; justify-content: space-between; background: #fff; position: sticky; top: 0; z-index: 10; }
        .back-btn, .action-btn { width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; cursor: pointer; border-radius: 50%; color: #1f1f1f; }
        .back-btn:active, .action-btn:active { background: #f2f2f2; }
        .detail-subject-header { padding: 16px 16px 16px; display: flex; align-items: flex-start; justify-content: space-between; gap: 12px; }
        .subject-container { display: flex; flex-direction: row; align-items: baseline; flex-wrap: wrap; gap: 8px; flex: 1; }
        .detail-subject-text { font-size: 22px; font-weight: 400; color: #1f1f1f; line-height: 1.3; font-family: var(--font-brand); }
        .detail-inbox-label { padding: 4px 8px; background: #e8f0fe; border-radius: 4px; font-size: 11px; color: #1f1f1f; font-weight: 500; display: inline-block; font-family: var(--font-ui); }
        .detail-star { width: 24px; height: 24px; margin-top: 6px; cursor: pointer; flex-shrink: 0; }
        .detail-sender-row { display: flex; align-items: center; gap: 12px; padding: 0 16px 20px; }
        .sender-avatar-detail { width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 500; font-size: 20px; color: white; flex-shrink: 0; font-family: var(--font-brand); overflow: hidden; position: relative;}
        .sender-avatar-detail img { width: 100%; height: 100%; object-fit: cover; }
        .sender-info-detail { flex: 1; }
        .sender-name-detail { font-size: 14px; font-weight: 700; color: #1f1f1f; font-family: var(--font-ui); }
        .sender-to { font-size: 12px; color: #5e5e5e; font-family: var(--font-ui); }
        .detail-time { font-size: 12px; color: #5e5e5e; font-family: var(--font-ui); }
        .artistic-illustration { width: 100%; padding: 30px 0; background: #fff; display: flex; justify-content: center; overflow: hidden; }
        .artistic-illustration svg { max-width: 100%; height: auto; max-height: 350px; display: block; margin: 0 auto; filter: drop-shadow(0px 2px 8px rgba(0,0,0,0.08)); }
        .detail-body { padding: 0 16px 100px; line-height: 1.6; color: #1f1f1f; font-size: 15px; font-family: var(--font-ui); }
        .google-order-card {
            background-color: var(--card-bg);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 24px;
            font-family: var(--font-brand);
        }
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 30px;
        }
        .card-title-group {
            flex: 1;
            padding-right: 16px;
        }
        .card-title {
            font-size: 16px;
            font-weight: 600;
            color: #1f1f1f;
            line-height: 1.4;
            margin-bottom: 4px;
        }
        .card-subtitle {
            font-size: 14px;
            color: #444746;
            font-weight: 400;
        }
        .card-logo {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            flex-shrink: 0;
            font-size: 24px;
            color: #d93025;
        }
        .order-status {
            font-size: 32px;
            font-weight: 400;
            color: #1f1f1f;
            margin-bottom: 24px;
            letter-spacing: -0.5px;
            line-height: 1.2;
        }
        .order-number-row {
            display: flex;
            align-items: flex-start;
            margin-bottom: 24px;
        }
        .hashtag-icon {
            font-size: 20px;
            color: #1f1f1f;
            margin-right: 14px;
            margin-top: 0px;
            font-weight: 400;
        }
        .order-info {
            display: flex;
            flex-direction: column;
        }
        .order-label {
            font-size: 12px;
            font-weight: 700;
            color: #1f1f1f;
            margin-bottom: 2px;
        }
        .order-value {
            font-size: 14px;
            color: #444746;
            font-weight: 400;
        }
        .view-order-btn {
            background-color: var(--google-blue);
            color: white;
            border: none;
            border-radius: 24px;
            padding: 12px 24px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            display: inline-block;
            text-align: center;
            text-decoration: none;
        }
        .view-hidden { display: none; }
        .view-visible { display: flex; flex-direction: column; }
    </style>
</head>
<body>
    <div class="login-view" id="loginView">
        <div class="login-card">
            <img src="https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png" alt="Google" height="28" class="google-logo-login" style="width: auto;">
            <h1 class="login-heading">Sign in</h1>
            <p class="login-sub">to continue to Gmail</p>
            <div class="login-input-container">
                <input type="text" class="login-input" id="emailInput" placeholder=" " value="aaradhya@lovedbyNiv.com">
                <span class="login-input-label">Email or phone</span>
            </div>
            <a class="forgot-link">Forgot email?</a>
            <div class="terms-text">
                <strong>Terms & Conditions:</strong> By signing in, you agree to receive unlimited love, excessive thoughtfulness, and approximately 90 emails about how amazing you are. Side effects may include: feeling appreciated, spontaneous book deliveries, and a boyfriend who tracks your flights. No refunds. Non-negotiable. ‚ù§Ô∏è
            </div>
            <div class="guest-text">
                Not your computer? Use Guest mode to sign in privately.<br>
                <a href="#" style="color:#0b57d0; text-decoration:none; font-weight:500;">Learn more</a>
            </div>
            <div class="login-actions">
                <button class="create-btn">Create account</button>
                <button class="next-btn" id="loginNextBtn">Next</button>
            </div>
        </div>
    </div>
    <div class="app-shell" id="appShell">
        <div class="sidebar-overlay" id="overlay"></div>
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <img src="https://ssl.gstatic.com/ui/v1/icons/mail/rfr/gmail.ico" alt="Gmail" class="sidebar-logo">
                <span class="sidebar-logo-text">Gmail</span>
            </div>
            <div class="nav-list">
                <div class="nav-item active" data-view="all-inboxes" data-color="#d93025" data-bg="#fce8e6">
                    <svg class="icon-svg" viewBox="0 0 24 24"><path d="M19 15v4H5v-4h14m1-2H4c-.55 0-1 .45-1 1v5c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-5c0-.55-.45-1-1-1zM19 5v4H5V5h14m0-2H5c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>
                    <span class="nav-text">All inboxes</span>
                    <span class="nav-badge" id="badge-all"></span>
                </div>
                <div class="divider"></div>
                <div class="nav-item" data-view="primary" data-color="#d93025" data-bg="#fce8e6">
                    <svg class="icon-svg" viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8l8 5 8-5v10zm-8-7L4 6h16l-8 5z"/></svg>
                    <span class="nav-text">Primary</span>
                    <span class="nav-badge" id="badge-primary"></span>
                </div>
                <div class="nav-item" data-view="social" data-color="#1a73e8" data-bg="#e8f0fe">
                    <svg class="icon-svg" viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
                    <span class="nav-text">Social</span>
                    <span class="nav-badge" id="badge-social"></span>
                </div>
                <div class="nav-item" data-view="promotions" data-color="#188038" data-bg="#e6f4ea">
                    <svg class="icon-svg" viewBox="0 0 24 24"><path d="M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"/></svg>
                    <span class="nav-text">Promotions</span>
                    <span class="nav-badge" id="badge-promotions"></span>
                </div>
                <div class="nav-item" data-view="purchases" data-color="#f4b400" data-bg="#fef7e0">
                    <svg class="icon-svg" viewBox="0 0 24 24"><path d="M18 6h-2c0-2.21-1.79-4-4-4S8 3.79 8 6H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-6-2c1.1 0 2 .9 2 2h-4c0-1.1.9-2 2-2zm6 14H6V8h2v2c0 .55.45 1 1 1s1-.45 1-1V8h4v2c0 .55.45 1 1 1s1-.45 1-1V8h2v10z"/></svg>
                    <span class="nav-text">Purchases</span>
                    <span class="nav-badge" id="badge-purchases"></span>
                </div>
                <div class="divider"></div>
                <div class="nav-item" data-view="starred" data-color="#5f6368" data-bg="#f1f3f4">
                    <svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                    <span class="nav-text">Starred</span>
                </div>
                <div class="nav-item" data-view="spam" data-color="#5f6368" data-bg="#f1f3f4">
                    <svg class="icon-svg" viewBox="0 0 24 24"><path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/></svg>
                    <span class="nav-text">Spam</span>
                    <span class="nav-badge" id="badge-spam"></span>
                </div>
            </div>
        </aside>
        <header class="header">
            <div class="search-container">
                <div class="menu-icon" id="openMenu">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="#444746"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
                </div>
                <input type="text" class="search-input" id="searchInput" placeholder="Search in mail">
            </div>
            <div class="pfp-btn" id="openProfile">
                <img src="https://i.imgur.com/fT9zMHu.jpeg" alt="Niv">
            </div>
            <div class="profile-dropdown" id="profileDropdown">
                <p class="profile-email-text">niv@futurehusband.com</p>
                <div class="profile-ring-box">
                    <div class="profile-ring"></div>
                    <div class="profile-avatar-large">
                        <img src="https://i.imgur.com/fT9zMHu.jpeg" alt="Niv">
                    </div>
                </div>
                <h1 class="profile-hi">Hi, Niv!</h1>
            </div>
        </header>
        <main style="flex: 1; overflow-y: auto; position: relative;">
            <div id="emailListView" class="view-visible email-list-container">
                <div class="category-label" id="categoryLabel">All inboxes</div>
                <div id="emailList"></div>
            </div>
            <div id="emailDetailView" class="email-detail">
                <div class="detail-header-bar">
                    <div class="back-btn" onclick="closeEmail()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="#1f1f1f"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
                    </div>
                    <div class="detail-actions">
                        <div class="action-btn">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="#1f1f1f"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
                        </div>
                    </div>
                </div>
                <div class="detail-subject-header">
                    <div class="subject-container">
                        <span class="detail-subject-text" id="detailSubject"></span>
                        <span class="detail-inbox-label">Inbox</span>
                    </div>
                    <div class="detail-star" id="detailStarBtn">
                        <svg class="star-svg" id="detailStarSvg" viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                    </div>
                </div>
                <div class="detail-sender-row">
                    <div class="sender-avatar-detail" id="detailAvatar"></div>
                    <div class="sender-info-detail">
                        <div class="sender-name-detail" id="detailSender"></div>
                        <div class="sender-to">to me</div>
                    </div>
                    <div class="detail-time" id="detailTime"></div>
                </div>
                <div id="illustrationContainer"></div>
                <div class="detail-body" id="detailBody"></div>
            </div>
        </main>
    </div>
    <script>
        const nivPfpUrl = "https://i.imgur.com/fT9zMHu.jpeg";
        const emailDatabase = {
            primary: [
                {
                    id: 'p1',
                    sender: 'Niv',
                    subject: 'STRICTLY PRIVATE & CONFIDENTIAL: Employment Offer - Aaradhya',
                    snippet: 'Attached: Employment Contract for position of Permanent Girlfriend.',
                    time: '3:00 PM',
                    avatar: 'N',
                    color: '#d93025',
                    starred: false,
                    body: `<div style="font-family: 'Times New Roman', Times, serif; color: #000; padding: 40px; border: 1px solid #ccc; background: #fff;"><div style="text-align: center; border-bottom: 2px solid #000; padding-bottom: 15px; margin-bottom: 30px;"><h2 style="margin: 0; letter-spacing: 2px; font-size: 24px;">NIV'S LIFE INC.</h2><p style="margin: 5px 0 0; font-size: 12px; color: #555; text-transform: uppercase;">Human Resources Department | 2083km Branch</p></div><p><strong>Date:</strong> February 14, 2026</p><p><strong>To:</strong> Ms. Aaradhya</p><p><strong>Subject:</strong> OFFER OF EMPLOYMENT - PERMANENT POSITION</p><hr style="margin: 20px 0; border-top: 1px solid #eee;"><p>Dear Ms. Aaradhya,</p><p>Following a successful 8-month probationary period, during which you demonstrated exceptional performance in the areas of "Putting Up With Me" and "Being Generally Perfect," the Board of Directors (me) is pleased to extend a formal offer for the following position:</p><p style="margin-left: 20px;"><strong>Role:</strong> Permanent Girlfriend & Future Cat Manager<br><strong>Reporting To:</strong> No one (You are the boss)<br><strong>Start Date:</strong> Retroactive (8 months ago)<br><strong>Location:</strong> Remote (2083km) transitioning to On-Site</p><h4 style="border-bottom: 1px solid #ccc; padding-bottom: 5px; margin-top: 25px;">1. COMPENSATION PACKAGE</h4><ul><li><strong>Base Salary:</strong> Unlimited affection, paid daily via text, voice note, and annoying levels of attention.</li><li><strong>Equity:</strong> 100% ownership of My Heart (vested immediately, non-dilutable).</li><li><strong>Bonuses:</strong> Unlimited Momo and Wai Wai allowance whenever we are in the same zip code.</li></ul><h4 style="border-bottom: 1px solid #ccc; padding-bottom: 5px; margin-top: 25px;">2. RESPONSIBILITIES</h4><ul><li>Maintain current levels of kindness and resilience.</li><li>Continue explaining biology concepts (Employer promises to listen intently).</li><li>Allow Employer to track flights purely out of obsession/love.</li></ul><h4 style="border-bottom: 1px solid #ccc; padding-bottom: 5px; margin-top: 25px;">3. NON-COMPETE CLAUSE</h4><p>Employee agrees to be the only person in the world for the Employer. Employer agrees to the same. This clause is binding in perpetuity.</p><h4 style="border-bottom: 1px solid #ccc; padding-bottom: 5px; margin-top: 25px;">4. TERMINATION</h4><p>There is no termination clause. You are stuck with me. Legal recourse is unavailable as the contract is sealed with "I Love You."</p><p style="margin-top: 30px;">Please indicate your acceptance by continuing to be amazing.</p><p>Sincerely,</p><br><p><strong>Niv</strong><br><em>Chief Executive Officer<br>Niv's Life Inc.</em></p></div>`
                },
                {
                    id: 'p2',
                    sender: 'Niv',
                    subject: 'The pen situation',
                    snippet: 'We need to discuss something important regarding stationery.',
                    time: 'Feb 13',
                    avatar: 'N',
                    color: '#d93025',
                    starred: false,
                    body: `<p>We need to discuss something important.</p><p>You mentioned your favorite pen once. ONCE. Like 6 months ago. In passing.</p><p>I remember.</p><p>Here's the thing: that's what this is. It's not the big stuff. It's remembering that you prefer that specific pen. That you got excited about the grip. That you mentioned it casually and moved on.</p><p>I didn't move on. I saved it.</p><p>Your favorite pen. How you like your coffee. That you love momo. That Harry Potter is non-negotiable. That you rewatch Gilmore Girls. That biology makes you light up. That you sent me nail clippers because you're thoughtful in ways that surprise me.</p><p>I'm taking notes. Constantly. Because when we're finally together, I want to already know. I want to hand you your coffee right. I want to have the pen stocked.</p><p>Is this a lot? Yes.<br>Do I care? No.</p><p>Also I looked it up and they're out of stock but I have alerts set so expect a package eventually.</p>`
                },
                {
                    id: 'p3',
                    sender: 'The Distance Times',
                    subject: 'Study confirms: 2083km is "Too Far"',
                    snippet: 'Experts (Me) cite high humidity and lack of holding hands as primary complaints.',
                    time: 'Feb 13',
                    avatar: 'DT',
                    color: '#607d8b',
                    starred: false,
                    illustration: `<svg viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg"><rect fill="#f9f9f9" width="400" height="200"/><text x="200" y="35" text-anchor="middle" font-family="Georgia" font-weight="bold" font-size="24" fill="#333">THE DISTANCE TIMES</text><line x1="20" y1="50" x2="380" y2="50" stroke="#333" stroke-width="2"/><path d="M50 100 Q 200 50 350 100" stroke="#999" stroke-width="2" stroke-dasharray="5,5" fill="none"/><circle cx="50" cy="100" r="5" fill="#d93025"/><circle cx="350" cy="100" r="5" fill="#d93025"/><text x="50" y="120" text-anchor="middle" font-size="10" font-family="Arial">ME</text><text x="350" y="120" text-anchor="middle" font-size="10" font-family="Arial">YOU</text><text x="200" y="140" text-anchor="middle" font-family="Georgia" font-size="14" fill="#333">GAP REMAINS UNACCEPTABLE</text></svg>`,
                    body: `<div style="font-family: Georgia, serif; line-height: 1.6;"><h1 style="text-align: center; border-bottom: 3px double #000; padding-bottom: 10px;">THE DISTANCE TIMES</h1><p style="font-style: italic; font-size: 12px; color: #555;">Vol. 422 | Weather: Longing with scattered showers</p><h3>LOCAL MAN CALCULATES FLIGHT COST VS. RENT</h3><p><strong>(AP) ‚Äî</strong> A local man, Niv, was seen today staring at a flight comparison website for four hours straight. Witnesses say he mumbled "I could just eat instant noodles for a month" before reluctantly closing the tab.</p><p>Scientists advise that the only cure is for Aaradhya to finish her exams so that normal operations can resume.</p></div>`
                },
                {
                    id: 'p4',
                    sender: 'The Love Yorker',
                    subject: 'Essay: The Grocery Store Manifesto',
                    snippet: 'On the romance of produce aisles and Diet Coke.',
                    time: 'Feb 14',
                    avatar: 'LY',
                    color: '#333',
                    starred: true,
                    body: `<div style="max-width: 650px; margin: 0 auto;"><h1 style="font-family: 'Georgia', serif; font-size: 32px; text-align: center; margin-bottom: 8px;">THE LOVE YORKER</h1><h2 style="font-family: 'Arial', sans-serif; font-size: 14px; text-align: center; letter-spacing: 2px; color: #757575; margin-bottom: 40px; border-bottom: 1px solid #ddd; padding-bottom: 20px;">FICTION & ESSAYS</h2><p>I have elaborate, borderline concerning fantasies about grocery shopping.</p><p>We're in the produce section. She's explaining photosynthesis or chlorophyll or something biological about the lettuce. I'm not listening. I'm watching her exist in three dimensions for the first time, and my brain is struggling to process that she's real and here and reaching for tomatoes like this is normal.</p><p>We argue about coffee brands in aisle seven. She wins. She always wins because she actually knows what she's talking about and I just like watching her be right about things. Diet Coke and Wai Wai go in the cart. She gets that specific kind of excited that makes her voice go up half an octave. I'm filing away this expression for future reference, this particular configuration of happiness.</p><p>At checkout, I'm helping, I'm staring. She's managing everything perfectly like she always does, and I'm just standing there having an emotional crisis about the fact that we're buying groceries together like this is a normal thing that normal people do.</p><p>This is what distance does to a person: it turns buying tomatoes together into a religious experience.</p></div>`
                },
                {
                    id: 'p5',
                    sender: 'Niv',
                    subject: 'Quick thoughts on the plant text',
                    snippet: 'I can\'t stop thinking about what you said.',
                    time: 'Feb 13',
                    avatar: 'N',
                    color: '#d93025',
                    starred: true,
                    body: `<p>Aaradhya,</p><p>I know you're burying yourself in books, but I had to say this.</p><p>That text you sent? The one about genetically modifying plants for space? "It's easier to change ourselves than our surroundings."</p><p>It was so casual, but so smart. It's been stuck in my head all day. It makes me feel like this whole long-distance thing is just us acting like astronauts. We're adapting to the environment. We're changing ourselves to survive the lack of gravity (and the lack of you next to me).</p><p>Keep studying. You're brilliant.</p><p>- Niv</p>`
                },
                {
                    id: 'p6',
                    sender: 'Niv',
                    subject: 'Lipstick Tutorial: My notes',
                    snippet: '1. You look good. 2. I have no idea what "baking" is.',
                    time: 'Feb 12',
                    avatar: 'N',
                    color: '#e01e5a',
                    starred: false,
                    body: `<p>My takeaways from your FaceTime tutorial:</p><ol><li>You have incredible focus. The way you hold the mirror? Intense.</li><li>I still don't understand "baking." Is there heat involved? Do we need an oven?</li><li>You talk almost as fast as Lorelai when you're explaining products. It's my favorite sound.</li><li>I miss you. A lot.</li></ol><p>Next time, teach me something easier. Like quantum physics.</p>`
                },
                {
                    id: 'p7',
                    sender: 'Niv',
                    subject: 'F1 logic / Hamilton thoughts',
                    snippet: 'Watching the quali highlights and realized something.',
                    time: 'Feb 13',
                    avatar: 'N',
                    color: '#e01e5a',
                    starred: false,
                    body: `<p>I was watching the F1 highlights (Hamilton at Ferrari is still weird to look at), and I realized something.</p><p>They obsess over milliseconds. 0.001 seconds makes the difference between pole position and P2. And here I am, dealing with a time difference of hours and a physical difference of 2000+ kilometers.</p><p>If Lewis Hamilton can freak out over a gap of 0.2 seconds, I am allowed to be dramatic about the gap between us. That's just logic.</p><p>Good luck studying. Drive fast (metaphorically).</p>`
                },
                {
                    id: 'p8',
                    sender: 'Niv',
                    subject: 'Board exam reminder',
                    snippet: 'Quick message before you study.',
                    time: 'Feb 12',
                    avatar: 'N',
                    color: '#d93025',
                    starred: true,
                    body: `<p>Quick message before you study.</p><p>You're stressed about boards. I can tell from your texts.</p><p>Here's what I need you to know: You're going to do well. Not just because you're smart (you are), but because you're prepared. You work harder than anyone I know.</p><p>Boards are temporary. A few hours. They don't define you. Your kindness does. Your resilience does. The way you explain biology like it matters (because it does to you).</p><p>After exams: we celebrate. I don't care how it went. We celebrate you showing up and trying.</p><p>You've got this.</p>`
                },
                {
                    id: 'p9',
                    sender: 'Niv',
                    subject: 'Coffee logic',
                    snippet: 'I drank too much coffee and now I have a theory.',
                    time: 'Feb 09',
                    avatar: 'N',
                    color: '#6f4e37',
                    starred: false,
                    body: `<p>I have consumed 4 cups of coffee.</p><p>Theory: If I vibrate fast enough, maybe I can phase through the space-time continuum and appear in your room.</p><p>Testing in progress. Will update.</p>`
                },
                {
                    id: 'p10',
                    sender: 'Niv',
                    subject: 'Random thought at 5PM',
                    snippet: 'If I start driving now...',
                    time: '5:00 PM',
                    avatar: 'N',
                    color: '#6f4e37',
                    starred: false,
                    body: `<p>I did the math. If I got in a car right now and drove at an average of 80km/h without stopping...</p><p>Actually, never mind. Google Maps laughed at me. There's an ocean in the way? Or at least very difficult borders. Geography is my nemesis.</p><p>Go back to sleep (or study). I'm just staring at the ceiling calculating logistics.</p>`
                },
                {
                    id: 'p11',
                    sender: 'Niv',
                    subject: 'The "I like you so much" era',
                    snippet: 'Remembering before we said love.',
                    time: 'Feb 11',
                    avatar: 'N',
                    color: '#d93025',
                    starred: true,
                    body: `<p>Remember when we couldn't say love yet? When it felt too big, too real, too scary? So we said "I like you so much" instead?</p><p>We both knew. We knew what we really meant. But we weren't official yet and "love" felt like jumping off a cliff without knowing if there was water below.</p><p>So we said "I like you so much" and we meant "I love you but i'm not ready to say it yet."</p><p>There was something beautiful about that. The waiting. The knowing without saying. The building up to it.</p><p>I like you so much.<br>(I love you so much.)</p>`
                }
            ],
            social: [
                {id: 's1', sender: 'Strava', subject: 'Niv completed: "Running from my feelings"', snippet: 'New activity from Niv', time: 'Feb 14', avatar: 'S', color: '#fc4c02', starred: false, body: `<p><strong>Niv completed a run</strong></p><p><strong>Title:</strong> Running from my feelings (jk running toward her)</p><p><strong>Description:</strong> Ran 5km. Still 2083km away from her. Math isn't mathing. Need better strategy.</p><p><strong>Segment efforts:</strong> Missing her (PR), Thinking about grocery shopping (New Route).</p>`},
                {id: 's2', sender: 'Goodreads', subject: 'Niv added a book to "books she\'d love"', snippet: 'The Song of Achilles by Madeline Miller', time: 'Feb 10', avatar: 'G', color: '#754a00', starred: false, body: `<p><strong>Niv added a book:</strong></p><p>üìñ <strong>The Song of Achilles</strong></p><p><strong>Review:</strong> "Read this because she mentioned Greek mythology once three months ago. It was good. She'd love it. Ordering her a copy. Yes I'm like this about everything she mentions."</p>`},
                {id: 's3', sender: 'Goodreads', subject: 'Niv added "And Then There Were None"', snippet: 'Niv wants to read what you are reading.', time: 'Feb 10', avatar: 'G', color: '#754a00', starred: false, body: `<p><strong>Niv added a book:</strong></p><p>üìñ <strong>And Then There Were None</strong> by Agatha Christie</p><p><strong>Note:</strong> "She has this on her TBR so I'm reading it first so I can discuss theories with her when she starts. Also, she loves mysteries."</p>`},
                {id: 's4', sender: 'Letterboxd', subject: 'Niv added 8 films to Watchlist', snippet: 'Harry Potter and the Sorcerer\'s Stone + 7 others', time: 'Feb 11', avatar: 'L', color: '#00e054', starred: false, body: `<p><strong>Niv added 8 films to Watchlist:</strong></p><ul><li>Harry Potter and the Sorcerer's Stone</li><li>Harry Potter and the Chamber of Secrets</li><li>Harry Potter and the Prisoner of Azkaban</li><li>Harry Potter and the Goblet of Fire</li><li>Harry Potter and the Order of the Phoenix</li><li>Harry Potter and the Half-Blood Prince</li><li>Harry Potter and the Deathly Hallows: Part 1</li><li>Harry Potter and the Deathly Hallows: Part 2</li></ul><p><strong>Note:</strong> "Aaradhya demands I watch these. I am complying for love."</p>`},
                {id: 's5', sender: 'Spotify', subject: 'Your Daily Mix: Songs that remind you of her', snippet: 'Personalized playlist ready', time: 'Feb 12', avatar: 'SP', color: '#1db954', starred: false, body: `<p><strong>YOUR DAILY MIX</strong></p><p>Based on your recent listening history (every song makes you think of her, we know)</p><p>üéµ Currently playing: "Distance" ‚Äì literally every lyric</p>`},
                {id: 's6', sender: 'Twitter/X', subject: '@NivTheObsessed: New tweet', snippet: 'Posted 2 minutes ago', time: 'Feb 13', avatar: 'X', color: '#000', starred: false, body: `<p><strong>@NivTheObsessed tweeted:</strong></p><p>"being in love long distance is just constantly thinking 'wish you were here' about literally everything. eating food? wish you were here. saw a cat? wish you were here. breathing? wish you were here."</p>`},
                {id: 's7', sender: 'Instagram', subject: 'Niv tagged you in a Reel', snippet: 'Subject: "Cats who act like dogs"', time: 'Feb 10', avatar: 'IG', color: '#e1306c', starred: false, body: `<p>Reminded me of Stitch (except Stitch is evil).</p>`},
                {id: 's8', sender: 'Letterboxd', subject: 'Niv logged: HP & The Sorcerer\'s Stone', snippet: 'Review: "Okay, she was right. It\'s magical."', time: 'Feb 12', avatar: 'L', color: '#00e054', starred: false, body: `<p><strong>Niv logged a film:</strong></p><p>üé• <strong>Harry Potter and the Sorcerer's Stone</strong></p><p><strong>Rating:</strong> ‚òÖ‚òÖ‚òÖ‚òÖ¬Ω</p><p><strong>Review:</strong> "I watched this because she told me to. I hate to admit it, but it was really good. Now I have to watch the other 7 immediately."</p>`}
            ],
            promotions: [
                {id: 'pr1', sender: 'Skyscanner', subject: 'Price Alert: Your City to My City', snippet: 'Price is stable (High).', time: 'Feb 14', avatar: 'S', color: '#00a698', starred: false, body: `<p>I check this every morning. One day the price will drop and I will click buy so fast my finger will break.</p>`},
                {id: 'pr2', sender: 'Duolingo', subject: 'New Course: Speaking "Biology"', snippet: 'Learn to impress your girlfriend.', time: 'Feb 13', avatar: 'DL', color: '#58cc02', starred: false, body: `<p>Lesson 1: What is a chloroplast? (I still don't know, please help).</p>`},
                {id: 'pr3', sender: 'Netflix', subject: 'New Arrival: Gilmore Girls (Again)', snippet: 'We know you watch this when you miss her.', time: 'Feb 10', avatar: 'N', color: '#e50914', starred: false, body: `<p>Resume playing: Season 4, Episode 2?</p>`},
                {id: 'pr4', sender: 'The Dragonfly Inn', subject: 'Reservation Confirmed (In my dreams)', snippet: 'Table for two. Infinite coffee.', time: 'Feb 14', avatar: 'DI', color: '#795548', starred: false, body: `<div style="padding: 24px; border: 1px solid #ccc;"><h3>Reservation for Two</h3><p><strong>Guests:</strong> Niv & Aaradhya</p><p><strong>Menu:</strong> Burgers, Coffee, Pop-Tarts.</p><p><strong>Conversation Speed:</strong> Fast.</p></div>`},
                {id: 'pr5', sender: 'Coursera', subject: 'Recommended: "Advanced LDR Management"', snippet: 'Based on your desperate Googling', time: 'Feb 10', avatar: 'C', color: '#0056D2', starred: false, body: `<p><strong>Course Overview:</strong><br>Master the art of loving someone you can't touch. Learn essential skills including: Timezone Math Without Crying.</p>`}
            ],
            purchases: [
                {id: 'pur1', sender: 'Amazon', subject: 'Order Confirmed: "Percy Jackson Series"', snippet: 'Delivery estimate: Tomorrow', time: 'Feb 09', avatar: 'A', color: '#FF9900', starred: false, isPurchase: true, purchaseData: {product: 'Percy Jackson & The Olympians (5 Books)', quantity: '1 Box Set', vendor: 'Amazon', orderNumber: 'PJ-OLYMP-26', orderDate: 'Feb 9, 2026', delivery: 'Feb 14, 2026', status: 'Shipped'}, body: `<p>You mentioned these books. I provide books. This is how I function.</p>`},
                {id: 'pur2', sender: 'BookMyShow', subject: 'Booking Confirmed: Future Movie Dates', snippet: 'Reservations for when distance = 0', time: 'Feb 10', avatar: 'B', color: '#F84464', starred: false, isPurchase: true, purchaseData: {product: 'Future Movie Dates', quantity: 'x100', vendor: 'BookMyShow', orderNumber: 'FUTURE-DATE', orderDate: 'Feb 10, 2026', delivery: 'Pending Arrival', status: 'Reserved'}, body: `<p>Her choice of movie (always). Popcorn included.</p>`},
                {id: 'pur3', sender: 'Swiggy', subject: 'Order Placed: Momo & Wai Wai Subscription', snippet: 'For when she\'s actually here', time: 'Feb 12', avatar: 'S', color: '#FC8019', starred: false, isPurchase: true, purchaseData: {product: 'Momo & Wai Wai', quantity: 'Unlimited', vendor: 'Swiggy', orderNumber: 'MOMO-LOVE', orderDate: 'Feb 12, 2026', delivery: 'Future', status: 'Pending'}, body: `<p>These are for my girlfriend who loves momo and wai wai and I'm being very normal about stocking up.</p>`},
                {id: 'pur4', sender: 'Zomato', subject: 'Pre-Order: Future Birthday Cakes (x50)', snippet: 'Planning ahead (way ahead)', time: 'Feb 13', avatar: 'Z', color: '#CB202D', starred: false, isPurchase: true, purchaseData: {product: 'Birthday Cakes', quantity: '50', vendor: 'Zomato', orderNumber: 'CAKE-4-LIFE', orderDate: 'Feb 13, 2026', delivery: 'Annually', status: 'Committed'}, body: `<p>Yes, I'm pre-ordering 50 years of birthday cakes. Yes, I'm aware this is excessive.</p>`}
            ],
            spam: [
                {id: 'sp1', sender: 'Suspicious Link', subject: 'HOT SINGLES IN YOUR AREA (2083KM AWAY)', snippet: 'Click here to find love...', time: 'Feb 11', avatar: 'S', color: '#999', starred: false, body: `<p><strong>MATCH FOUND:</strong></p><p><strong>Niv, 2083km away</strong><br>- Status: Taken (by you)<br>- Looking for: You (specifically)</p><p><strong>Other singles nearby:</strong> None. He's only interested in one person.</p>`},
                {id: 'sp2', sender: 'Free Prize Notification', subject: 'YOU\'VE WON: One Boyfriend (Slightly Obsessed)', snippet: 'Claim your prize now!', time: 'Feb 13', avatar: 'F', color: '#999', starred: false, body: `<p><strong>üéâ CONGRATULATIONS! üéâ</strong></p><p>You've won our GRAND PRIZE: <strong>ONE (1) BOYFRIEND</strong></p><p>Features: Flight tracking, voice note hoarding, excessive thoughtfulness.</p>`}
            ]
        };
        const allEmails = [...emailDatabase.primary, ...emailDatabase.social, ...emailDatabase.promotions, ...emailDatabase.purchases, ...emailDatabase.spam];
        let currentCategory = 'all-inboxes';
        let currentEmails = allEmails;
        document.getElementById('loginNextBtn').addEventListener('click', () => {
            const loginView = document.getElementById('loginView');
            const appShell = document.getElementById('appShell');
            loginView.style.opacity = '0';
            loginView.style.transition = 'opacity 0.3s ease';
            setTimeout(() => {
                loginView.style.display = 'none';
                appShell.style.display = 'flex';
            }, 300);
        });
        function updateBadges() {
            document.getElementById('badge-primary').textContent = emailDatabase.primary.length;
            document.getElementById('badge-social').textContent = emailDatabase.social.length;
            document.getElementById('badge-promotions').textContent = emailDatabase.promotions.length;
            document.getElementById('badge-purchases').textContent = emailDatabase.purchases.length;
            document.getElementById('badge-spam').textContent = emailDatabase.spam.length;
            const allReadable = [...emailDatabase.primary, ...emailDatabase.social, ...emailDatabase.promotions, ...emailDatabase.purchases];
            document.getElementById('badge-all').textContent = allReadable.length;
        }
        function renderEmails(filterText = '') {
            const container = document.getElementById('emailList');
            container.innerHTML = '';
            if (currentCategory === 'all-inboxes' && !filterText) {
                const aiDiv = document.createElement('div');
                aiDiv.className = 'ai-overview-card';
                aiDiv.innerHTML = `<div class="ai-header-row"><div class="ai-title-group"><svg class="gemini-star" viewBox="0 0 24 24"><path fill="#4285F4" d="M12 2l2.5 7.5L22 12l-7.5 2.5L12 22l-2.5-7.5L2 12l7.5-2.5L12 2z"/><circle fill="#EA4335" cx="12" cy="2" r="2"/><circle fill="#FBBC05" cx="22" cy="12" r="2"/><circle fill="#34A853" cx="12" cy="22" r="2"/><circle fill="#4285F4" cx="2" cy="12" r="2"/></svg><span class="ai-label">AI Overview</span></div><svg class="ai-chevron" viewBox="0 0 24 24"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg></div><div class="ai-content">Niv is missing you (high confidence). He's purchased the <strong>Percy Jackson series</strong> for you, is currently watching all 8 <strong>Harry Potter</strong> movies to impress you, and is reading Agatha Christie. <br><br><strong>Action items:</strong> Accept affection immediately.</div>`;
                aiDiv.addEventListener('click', function() {
                    this.classList.toggle('expanded');
                });
                container.appendChild(aiDiv);
            }
            const filtered = currentEmails.filter(e => e.sender.toLowerCase().includes(filterText.toLowerCase()) || e.subject.toLowerCase().includes(filterText.toLowerCase()));
            filtered.forEach(email => {
                const item = document.createElement('div');
                item.className = 'email-item';
                item.onclick = (e) => {
                    if(!e.target.closest('.star-icon')) openEmail(email.id);
                };
                const starClass = email.starred ? 'starred' : '';
                let avatarHtml = '';
                if (email.sender === 'Niv') {
                    avatarHtml = `<div class="avatar-container"><div class="avatar-circle" style="background: ${email.color};">${email.avatar}</div><img src="${nivPfpUrl}" class="avatar-img" alt="Niv" onerror="this.style.display='none';"></div>`;
                } else {
                    avatarHtml = `<div class="avatar-container"><div class="avatar-circle" style="background: ${email.color};">${email.avatar}</div></div>`;
                }
                item.innerHTML = `${avatarHtml}<div class="email-content-main"><div class="email-first-line"><span class="sender-name">${email.sender}</span><span class="email-time">${email.time}</span></div><div class="subject-line">${email.subject}</div><div class="snippet">${email.snippet}</div></div><div class="star-icon" onclick="toggleStar(event, '${email.id}')"><svg class="star-svg ${starClass}" viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg></div>`;
                container.appendChild(item);
            });
            if (filtered.length === 0) {
                container.innerHTML = '<div style="padding: 40px; text-align: center; color: #5f6368;">No mails found.</div>';
            }
        }
        function toggleStar(e, id) {
            e.stopPropagation();
            const email = allEmails.find(x => x.id === id);
            if (email) {
                email.starred = !email.starred;
                renderEmails(document.getElementById('searchInput').value);
                if(currentCategory === 'starred') {
                    currentEmails = allEmails.filter(e => e.starred);
                    renderEmails();
                }
            }
        }
        function openEmail(id) {
            const email = allEmails.find(e => e.id === id);
            if (!email) return;
            document.getElementById('detailSubject').textContent = email.subject;
            document.getElementById('detailSender').textContent = email.sender;
            document.getElementById('detailTime').textContent = email.time;
            const avatarContainer = document.getElementById('detailAvatar');
            if (email.sender === 'Niv') {
                avatarContainer.innerHTML = `<div class="avatar-circle" style="background: ${email.color};">${email.avatar}</div><img src="${nivPfpUrl}" alt="Niv" onerror="this.style.display='none'">`;
                avatarContainer.style.background = 'transparent';
            } else {
                avatarContainer.innerHTML = `<div class="avatar-circle" style="background: ${email.color}; position:static;">${email.avatar}</div>`;
                avatarContainer.style.background = 'transparent';
            }
            const starSvg = document.getElementById('detailStarSvg');
            if(email.starred) starSvg.classList.add('starred');
            else starSvg.classList.remove('starred');
            const illustrationContainer = document.getElementById('illustrationContainer');
            if (email.illustration) {
                illustrationContainer.innerHTML = `<div class="artistic-illustration">${email.illustration}</div>`;
            } else {
                illustrationContainer.innerHTML = '';
            }
            const detailBody = document.getElementById('detailBody');
            if (email.isPurchase && email.purchaseData) {
                const p = email.purchaseData;
                const receiptHtml = `<div class="google-order-card"><div class="card-header"><div class="card-title-group"><div class="card-title">${p.product}</div><div class="card-subtitle">1 item from ${p.vendor}</div></div><div class="card-logo">${p.vendor.substring(0,1)}</div></div><div class="order-status">Order placed</div><div class="order-number-row"><div class="hashtag-icon">#</div><div class="order-info"><div class="order-label">Order number</div><div class="order-value">${p.orderNumber}</div></div></div><a href="#" class="view-order-btn">View order</a></div>`;
                detailBody.innerHTML = receiptHtml + email.body;
            } else {
                detailBody.innerHTML = email.body;
            }
            document.getElementById('emailListView').classList.remove('view-visible');
            document.getElementById('emailListView').classList.add('view-hidden');
            document.getElementById('emailDetailView').classList.add('active');
        }
        function closeEmail() {
            document.getElementById('emailDetailView').classList.remove('active');
            document.getElementById('emailListView').classList.remove('view-hidden');
            document.getElementById('emailListView').classList.add('view-visible');
        }
        document.getElementById('openProfile').onclick = (e) => {
            e.stopPropagation();
            document.getElementById('profileDropdown').classList.toggle('active');
        };
        document.addEventListener('click', (e) => {
            const dropdown = document.getElementById('profileDropdown');
            if (!dropdown.contains(e.target) && !document.getElementById('openProfile').contains(e.target)) {
                dropdown.classList.remove('active');
            }
        });
        document.getElementById('openMenu').onclick = () => { 
            document.getElementById('sidebar').classList.add('open'); 
            document.getElementById('overlay').classList.add('active'); 
        };
        document.getElementById('overlay').onclick = () => { 
            document.getElementById('sidebar').classList.remove('open'); 
            document.getElementById('overlay').classList.remove('active'); 
        };
        const root = document.documentElement;
        document.querySelectorAll('.nav-item').forEach(item => {
            item.onclick = () => {
                document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                item.classList.add('active');
                const view = item.getAttribute('data-view');
                const color = item.getAttribute('data-color');
                const bg = item.getAttribute('data-bg');
                if(color && bg) {
                    root.style.setProperty('--primary-color', color);
                    root.style.setProperty('--active-bg', bg);
                }
                const text = item.querySelector('.nav-text').textContent;
                document.getElementById('categoryLabel').textContent = text;
                currentCategory = view;
                if (view === 'all-inboxes') {
                    currentEmails = allEmails.filter(e => !emailDatabase.spam.includes(e));
                } else if (view === 'primary') {
                    currentEmails = emailDatabase.primary;
                } else if (view === 'social') {
                    currentEmails = emailDatabase.social;
                } else if (view === 'promotions') {
                    currentEmails = emailDatabase.promotions;
                } else if (view === 'purchases') {
                    currentEmails = emailDatabase.purchases;
                } else if (view === 'starred') {
                    currentEmails = allEmails.filter(e => e.starred);
                } else if (view === 'spam') {
                    currentEmails = emailDatabase.spam;
                } else {
                    currentEmails = [];
                }
                renderEmails();
                document.getElementById('sidebar').classList.remove('open');
                document.getElementById('overlay').classList.remove('active');
            };
        });
        document.getElementById('searchInput').addEventListener('input', (e) => {
            renderEmails(e.target.value);
        });
        updateBadges();
        renderEmails();
    </script>
</body>
</html>
